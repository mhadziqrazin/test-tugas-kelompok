{% extends 'base.html' %}
{% load static %}

{% block css %}
<style>
    :root {
      /* primary color */
      --pr-color : #048353; 
      --scd-color : #01492E;
    }

    body {
      font-family: 'Object Sans';
      background-color: #F3FFF4;
    }

    /* Navbar Style */
    .navbar-brand {
      font-weight: 700;
      font-size: 20px;
    }

    .nav-link {
      font-size: 16px;
    }

    .button-login {
      width: 107px;
      height: 40px;
      background-color: #fff;
      color: var(--pr-color);
      border: none;
      font-size: 16px;
      font-weight: 700;
      border-radius: 8px;
    }

    .nav-color {
      background-color: var(--pr-color);
      transition: all ease-in-out .3s;
    }

    .bg-transparent {
      transition: all ease-in .3s;
    }

    nav {
      z-index: 9999;
    }

    /* Hero Section */
    #hero {
      width: 100%;
      height: 10vh;
      background: linear-gradient(F3FFF4, F3FFF4), no-repeat center / cover;
      color: white;
    }

    .hero-section {
      width: 80%;
      height: 100%;
      max-width: 1000px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }

    .hero-section .contains a {
      text-decoration: none;
      color: #fff;
      background: var(--pr-color);
      padding: 10px 30px;
      border-radius: 8px;
      margin-top: 10px;
      display: inline-block;
      margin-top: 1rem;
    }

    /* About CanWe */
    #about {
      text-align: center;
      padding-top: 130px;
      padding-left: 200px;
      padding-right: 200px;
      padding-bottom: 100px;
    }

    /* Fitur */
    #features {
      padding: 0px 0px;
      margin: 0px;
    }

    h2 {
      padding-bottom: 20px;
      text-align: center;
      font-weight: 500;
      color: var(--pr-color);
    }

    .card {
      width: 100%;
      height: 100%;
      background-color: white;
      padding-bottom: 15px;
      border-radius: 8px;
      box-shadow: 0 0 7px 3px rgba(0,0,0,0.05);
    }

    .picture img {
      width: 100%;
      height: 90%;
      border-radius: 8px;
    }

    .card-content {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .title {
      font-size: 20px;
      font-weight: 500;
      color: #000;
    }

    .description {
      padding-left: 50px;
      padding-right: 50px;
      font-size: 16px;
      color: #707070;
      text-align: center;
    }

    .button-card {
      border: none;
      font-size: 16px;
      color: #fff;
      padding: 8px 16px;
      background-color: var(--pr-color);
      border-radius: 8px;
      margin: 5px;
      cursor: pointer;
      transition: all 0.1s ease-in;
    }

    .button-card:hover {
      border: none;
      font-size: 16px;
      color: #fff;
      padding: 8px 16px;
      background-color: var(-scd-color);
      border-radius: 8px;
      margin: 5px;
      cursor: pointer;
      transition: all 0.1s ease-in;
    }

    /* FAQ */
    .faq-heading{
      padding: 60px 60px;
    }

    .faq-container{
      padding-top: 20px;
      padding-bottom: 50px;
      display: flex;
      justify-content: center;
      flex-direction: column;
    }

    .hr-line{
      width: 60%;
      margin: auto;
    }

    .faq-page {
      color: #444;
      cursor: pointer;
      padding: 30px 20px;
      width: 60%;
      border: none;
      outline: none;
      transition: 0.4s;
      margin: auto;
    }

    .faq-body{
      margin: auto;
      width: 60%; 
      padding: auto;
    }
    
    .active,
    .faq-page:hover {
      color: white;
      background-color: var(--scd-color);
    }
    
    .faq-body {
      padding: 0 18px;
      display: none;
      overflow: hidden;
    }

    .faq-page:after {
      content: '\2795';
      font-size: 13px;
      color: white;
      float: right;
      margin-left: 5px;
    }

    .active:after {
      content: "\2796";
    }

    .btn-faq {
      border: none;
      font-size: 16px;
      color: #fff;
      padding: 8px 16px;
      background-color: var(--pr-color);
      border-radius: 8px;
      margin: 0 550px;
      margin-top: 20px;
      align-items: center;
    }

    /* Footer */
    #footer {
      padding: 30px 20px;
      background-color: var(--pr-color);
    }

    #footer ul {
      margin-top: 0;
      padding: 0;
      list-style: none;
      font-size: 16px;
      line-height: 1.6;
      margin-bottom: 0;
    }

    #footer ul li a {
      text-align: center;
      color: #F3FFF4;
      text-decoration: none;
      opacity: 0.8;
    }

    #footer ul li a:hover {
      opacity: 1;
    }

    #footer ul li {
      display: inline-block;
      padding: 0 15px;
    }

    #footer .copyright {
      margin-top: 15px;
      text-align: center;
      font-style: 16px;
      color: whitesmoke;
    }

    /* Carousel */
    .carousel {
      width: 100vw;
      height: 100vh;
      position: relative;
    }

    .carousel > ul {
      margin: 0;
      padding: 0;
      list-style: none;
    }

    .slide {
      position: absolute;
      inset: 0;
      opacity: 0;
      transition: 200ms opacity ease-in-out;
      transition-delay: 200ms;
     
    }

    .slide > img {
      display: block;
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
    }

    .slide[data-active] {
      opacity: 1;
      z-index: 1;
      transition-delay: 0ms;
    }

    .carousel-button {
      position: absolute;
      z-index: 2;
      background: none;
      border: none;
      font-size: 4rem;
      top: 50%;
      transform: translateY(-50%);
      color: rgba(255,255,255,.5);
      cursor: pointer;
      border-radius: .25rem;
      padding: 0 .5rem;
      background-color: rgba(0,0,0,.1);
    }

    .carousel-button:hover, .carousel-button:focus {
      color: white;
      background-color: rgba(0,0,0,.2);
    }

    .carousel-button:focus{
      outline: 1px solid black;
    }

    .carousel-button.prev {
      left: 1rem;
    }

    .carousel-button.next {
      right: 2rem;
    }

</style>
{% endblock css %}

{% block content %}
<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark nav-color position-fixed w-100">
    <div class="container">
      <a class="navbar-brand" href="/canwe">
        <span class="myapp me-2">CanWe</span>
        <img src="https://cdn-icons-png.flaticon.com/128/2904/2904948.png" width="30" height="30">
      </a>

      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav mx-auto">
          <li class="nav-item mx-2">
            <a class="nav-link" href="/donasi">Donasi</a>
          </li>

          <li class="nav-item mx-2">
            <a class="nav-link" href="#">Galang Dana</a>
          </li>

          <li class="nav-item mx-2">
            <a class="nav-link" href="#">Histori</a>
          </li>

          <li class="nav-item mx-2">
            <a class="nav-link" href="/notifikasi">Notifikasi</a>
          </li>
        </ul>

        <div>
          <button type="button" class="button-login">
            <a class="button-login" id="loginbtn" href="{% url 'user:login_user' %}">Login</a>
          </button>
        </div>

      </div>
    </div>
  </nav>

<!-- Hero Section -->
<section id="hero">
    <div class="hero-section">
      <div class="contains">
      </div>
    </div>
  </section>

<!-- Donation Cards Section -->
<section id="donasi">
    <div class="donasi" style="margin: 60px;">
        <div class="row">
            <div class="col-12 col-md-12">
                <h2 style="text-align: left;">
                    Donasi Makanan
                </h2>
            </div>
        </div>

        <div id="card-makanan">
        </div>

        <div class="row" style="margin-top: 50px;">
            <div class="col-12 col-md-12">
                <h2 style="text-align: left;">
                    Donasi Penyuluhan Pendidikan Gizi
                </h2>
            </div>
        </div>

        <div id="card-pendidikan">
        </div>
        {% for donas in donasi %}
            <img src="{{donas.foto.url}}" alt="Smiley face" width="250" height="250">
        {% endfor %}
        
    </div>
</section>

<script>
    
    async function getDataDonasi() {
        return fetch("{% url 'donasi:get_data_donasi' %}").then((result) => result.json())
    }

    async function showDonasi() {
        document.getElementById('card-makanan').innerHTML = ""
        document.getElementById('card-pendidikan').innerHTML = ""
        const dataDonasi = await getDataDonasi()

        let cardMakanan = ``
        let cardPendidikan = ``
        let temp = ``
        let counterMakanan = 0
        let counterPendidikan = 0

        dataDonasi.forEach(donasi => {
            console.log(donasi.fields.urlFoto)
            
            temp = `\n
            <div class="col-12 col-md-4" style="margin-bottom: 20px;">
                <div class="card">
                    <div class="picture">
                        <img src="${donasi.fields.urlFoto}" height=80px>
                    </div>
        
                    <div class="card-content">
                        <div style="align-items: left;">
                            <h3 class="title">${donasi.fields.nama}</h3>
                            <p class="description">${donasi.fields.deskripsi}</p>
                        </div>
                        <button class="button-card">
                            <a href="#" style="text-decoration: none; color: white;">
                                Lakukan Donasi
                            </a>
                        </button>
                    </div>
                </div>
            </div>
            `

            if (donasi.fields.tipe == "Makanan") {
                if (counterMakanan%3 == 0) {
                    cardMakanan += `\n<div class="row">`
                }

                cardMakanan += temp
                counterMakanan++

                if (counterMakanan%3 == 0) {
                    cardMakanan += `\n</div>`
                }
            }
            
            if (donasi.fields.tipe == "Pendidikan") {
                if (counterPendidikan%3 == 0) {
                    cardPendidikan += `\n<div class="row">`
                }

                cardPendidikan += temp
                counterPendidikan++

                if (counterPendidikan%3 == 0) {
                    cardPendidikan += `\n</div>`
                }
            }    
        });

        document.getElementById('card-makanan').innerHTML = cardMakanan
        document.getElementById('card-pendidikan').innerHTML = cardPendidikan
    }

    showDonasi()
</script>

{% endblock content %}

